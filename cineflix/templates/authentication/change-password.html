{% extends 'base.html' %}
{% block section %}

<section id="create-movie" class="py-5 my-5">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-10">

        <div class="card shadow-lg border-0 rounded-4">
          <div class="card-header bg-primary text-white text-center py-3">
            <h3 class="mb-0">Change Password</h3>
          </div>

          <div class="card-body p-4">
            <form method="post" enctype="multipart/form-data">
              {% csrf_token %}

              <!-- New Password -->
              <div class="mb-3">
                <label class="form-label fw-bold">New Password</label>

                <div class="position-relative">
                  {{ form.new_password }}

                  <!-- ðŸ‘ Fixed Eye Icon -->
                  <i class="bi bi-eye-slash position-absolute top-50 end-0 translate-middle-y pe-3"
                     style="cursor:pointer;font-size:18px;"
                     onclick="
                      let p=document.getElementById('{{ form.new_password.id_for_label }}');
                      p.type = p.type==='password' ? 'text' : 'password';
                      this.classList.toggle('bi-eye');
                      this.classList.toggle('bi-eye-slash');
                     ">
                  </i>
                </div>

                {% if form.new_password.errors %}
                <p class="text-danger small">{{ form.new_password.errors.0 }}</p>
                {% endif %}
              </div>


              <!-- Confirm Password -->
              <div class="mb-3">
                <label class="form-label fw-bold">Confirm Password</label>

                <div class="position-relative">
                  {{ form.confirm_password }}

                  <!-- ðŸ‘ Fixed Eye Icon -->
                  <i class="bi bi-eye-slash position-absolute top-50 end-0 translate-middle-y pe-3"
                     style="cursor:pointer;font-size:18px;"
                     onclick="
                      let p=document.getElementById('{{ form.confirm_password.id_for_label }}');
                      p.type = p.type==='password' ? 'text' : 'password';
                      this.classList.toggle('bi-eye');
                      this.classList.toggle('bi-eye-slash');
                     ">
                  </i>
                </div>

                {% if form.confirm_password.errors %}
                <p class="text-danger small">{{ form.confirm_password.errors.0 }}</p>
                {% endif %}
              </div>


              <div class="d-flex justify-content-end mt-4">
                <button type="submit" class="btn btn-outline-accent btn-accent-arrow">
                  Change <i class="icon icon-ns-arrow-right"></i>
                </button>
              </div>

              {% if error %}
              <p class="text-danger small">{{ error }}</p>
              {% endif %}
            </form>
          </div>
        </div>

      </div>
    </div>
  </div>
</section>

{% endblock %}
